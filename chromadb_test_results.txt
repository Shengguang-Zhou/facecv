
🚀 Starting FaceCV API Tests
Base URL: http://localhost:8000
Waiting for server to start (max 15 retries)...
✅ Server is up and running after 1 attempts

==== Testing Health Endpoints ====

🔍 Testing GET http://localhost:8000/health
✅ Status: 200
Service: FaceCV API, Status: healthy

🔍 Testing GET http://localhost:8000/api/v1/health/comprehensive
✅ Status: 200
Overall health: healthy
Database availability: {'sqlite': True, 'mysql': True, 'chromadb': True}

🔍 Testing GET http://localhost:8000/api/v1/health/database
✅ Status: 200
Database status: healthy
Available databases: {'sqlite': True, 'mysql': True, 'chromadb': True}

==== Testing InsightFace Endpoints ====

🔍 Testing GET http://localhost:8000/api/v1/insightface/models/available
✅ Status: 200
Available models: ['buffalo_l', 'buffalo_m', 'buffalo_s', 'antelopev2']
Current model: buffalo_l

🔍 Testing GET http://localhost:8000/api/v1/insightface/get_model_info
❌ Expected status 200, got 404
Error: {'detail': 'Not Found'}

==== Testing DeepFace Endpoints ====

🔍 Testing GET http://localhost:8000/api/v1/deepface/model_info
❌ Expected status 200, got 404
Error: {'detail': 'Not Found'}

🔍 Testing GET http://localhost:8000/deepface/model_info
❌ Expected status 200, got 404
Error: {'detail': 'Not Found'}

==== Testing System Endpoints ====

🔍 Testing GET http://localhost:8000/api/v1/health/database
✅ Status: 200
Database info: {'status': 'healthy', 'availability': {'sqlite': True, 'mysql': True, 'chromadb': True}, 'face_count': 0, 'default_db': 'ChromaFaceDB', 'last_check': '2025-05-26T23:02:13.599912'}

✅ All tests completed
